{% extends "user_home.html" %}
{% block content %}

{% for message in get_flashed_messages() %}
    <div class="alert alert-primary alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
{% endfor %}
<div class="h-full"> 

    <div class="container-fluid border-top border-bottom py-4">
        <section class="container-sm my-auto text-center">
            <h1 class="display-4 fw-bold">{{ user.name }}'s DashBoard‚ú®</h1>
            <p class="display-6 fw-light">Customize and View your Activity</p>
        </section>
    </div>

    <div class="container-fluid rounded-1 border-left d-grid ovingGradient ", style="width:100%; padding:1rem;">
        <h1 class="display-3 fw-bold p-3 m-6 text-center ">Latest Posts ...</h1>
        <div class="row d-flex justify-content-center align-items-center p-3 gap-3 m">
            {% for post in latest_posts %}
            <div class="col-md-3 growContainer">
                <a href="{{ url_for('post', post_id=post.id) }}" style="text-decoration:none; color:black;">
                <div class="container normalContainer" id="{{ post.id }}">
                    <div class="row">
                        <div class="col-md-4 border-end">
                            <h5 class="fw-light px-3">{{ post.publish_date.strftime('%Y-%m-%d %H:%M') }}</h5>
                        </div>
                        <div class="col-md-8 py-2">
                            <h4 class="fw-bold text-center">{{ post.title }}</h4>
                            <h3 class="fw-light text-center">{{ post.caption }}</h3>
                        </div>
                    </div>
                </div>
            </a>
            </div>
            {% endfor %}
        </div>
    </div>

    
    <div class="container-fluid border-top p-4 movingGradeient">
        <div class ="row d-flex">
            <div class="col-md-4">
                <div class = "container border glassContainer mb-4">
                    <div class ="row d-block">
                        <div class = "col-md-12 py-3">
                            <h3 class="fs-2 fw-bold text-white">Current Account Details</h3>
                            <!-- Account Details Here -->
                            <p class="fs-3 text-white mb-1 fw-light"><strong>Username: </strong> {{ user.username }}</p>
                            <p class="fs-3 text-white mb-1 fw-light"><strong>Name: </strong> {{ user.name }}</p>
                            <p class="fs-3 text-white mb-1 fw-light"><strong>Email: </strong> {{ user.email }}</p>
                        </div>
                    </div>
                </div>

                <div class = "container border glassContainer my-4 text-center">
                    <div class ="row d-block">
                        <div class = "col-md-12 py-2">
                            <h3 class="fs-1 fw-bold text-white">Total Posts üß™</h3>
                            <h1 class="fs-1 fw-light text-white">{{post_count}} Threads</h1>
                        </div>
                    </div>
                </div>

                <div class = "container border glassContainer my-4 text-center">
                    <div class ="row d-block">
                        <div class = "col-md-12 py-2">
                            <h3 class="fs-1 fw-bold text-white">Total Comments üí¨</h3>
                            <h1 class="fs-1 fw-light text-white">{{comment_count}} Comments</h1>
                        </div>
                    </div>
                </div>

                <div class = "container border glassContainer my-4 text-center">
                    <div class ="row d-block">
                        <div class = "col-md-12 py-2">
                            <h3 class="fs-1 fw-bold text-white">Total Tags üí¨</h3>
                            <h1 class="fs-1 fw-light text-white">{{tag_count}} Tags</h1>
                        </div>
                    </div>
                </div>

            </div>
            <div class="col-md-8">
                <div class="container glassContainer">
                    <div class ="row d-block">
                        <div class = "col-md-12 py-2 p-3 d-block justify-contents-center my-3 p-5">
                            <h3 class="fs-1 fw-bold text-white">Edit Your Account Info : </h3>
                            <!-- Account Details Here -->
                            <form action="/edit_account" method="POST" class="">
                                {{ register_form.hidden_tag() }}
                                <div class="mb-3 input-group my-3">
                                    <span class="input-group-text my-3"><i class="fa fa-user"></i></span>
                                    <input type="text" class="form-control fs-4 my-3" id="username" name="username" placeholder="Username" value="{{ user.username }}">
                                    <label for="username" class="form-label fs-3 text-white visually-hidden">Username</label>
                                </div>
                                <div class="mb-3 input-group my-3">
                                    <span class="input-group-text my-3"><i class="fa fa-id-card"></i></span>
                                    <input type="text" class="form-control my-3 fs-4" id="name" name="name" placeholder="Full Name" value="{{ user.name }}">
                                    <label for="name" class="form-label fs-3 text-white visually-hidden">Full Name</label>
                                </div>
                                <div class="mb-3 input-group my-3">
                                    <span class="input-group-text my-3"><i class="fa fa-envelope"></i></span>
                                    <input type="email" class="form-control fs-4 my-3" id="email" name="email" placeholder="Email Address" value="{{ user.email }}">
                                    <label for="email" class="form-label fs-3 text-white visually-hidden">Email Address</label>
                                </div>
                                <div class="mb-3 input-group">
                                    <span class="input-group-text my-3"><i class="fa fa-lock"></i></span>
                                    <input type="password" class="form-control fs-4 my-3" id="password" name="password" placeholder="New Password">
                                    <label for="password" class="form-label fs-3 text-white visually-hidden">New Password</label>
                                </div>
                                <div class="mb-3 input-group">
                                    <span class="input-group-text my-3"><i class="fa fa-lock"></i></span>
                                    <input type="password" class="form-control fs-4 my-3" id="confirm_password" name="confirm_password" placeholder="Confirm New Password">
                                    <label for="confirm_password" class="form-label fs-3 text-white visually-hidden">Confirm New Password</label>
                                </div>
                                <div class="text-center mt-5">
                                    <button type="submit" class="btn btn-primary fs-3" style = "width:100%;">Submit</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <nav class="navbar border-top border-bottom">
        <div class="d-flex justify-content-center align-items-center w-100">
            <h3 class="fw-light"> You've reached the end of the Page üòê </h3>
        </div>
    </nav>

</div>

{% endblock content %}
